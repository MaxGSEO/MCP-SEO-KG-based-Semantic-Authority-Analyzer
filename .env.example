# SEO Semantic MCP Server - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================
# TEXTRAZOR API (Required for entity extraction)
# =============================================
# Get free API key at https://www.textrazor.com/
TEXTRAZOR_API_KEY=your_textrazor_api_key_here

# Rate limiting for TextRazor (free tier: 500/day)
TEXTRAZOR_REQUESTS_PER_DAY=500
CONCURRENT_REQUESTS=3

# =============================================
# HUGGINGFACE (Required for NuExtract)
# =============================================
# Get token at https://huggingface.co/settings/tokens
HF_TOKEN=hf_your_token_here
NUEXTRACT_HF_TOKEN=hf_your_token_here

# NuExtract mode: 'huggingface' (default) or 'vllm' (local)
NUEXTRACT_MODE=huggingface

# vLLM URL (only if NUEXTRACT_MODE=vllm)
NUEXTRACT_VLLM_URL=http://localhost:8001

# =============================================
# CRAWL4AI MICROSERVICE (Phase 2)
# =============================================
# URL of the Python Crawl4AI microservice
CRAWL4AI_URL=http://localhost:8000

# =============================================
# ENTITY EXTRACTION SETTINGS
# =============================================
MIN_ENTITY_CONFIDENCE=0.5
MAX_ENTITIES_PER_PAGE=100

# =============================================
# CO-OCCURRENCE GRAPH SETTINGS (Legacy)
# =============================================
COOCCURRENCE_WINDOW=5
MIN_EDGE_WEIGHT=2

# =============================================
# STRUCTURED PROXIMITY WEIGHTS (Phase 2)
# =============================================
# Weights for different proximity tiers
# Sentence: strongest signal (same sentence)
# Paragraph: same paragraph/block
# Section: same H2/H3 section
# Page: same page (weak signal)
PROXIMITY_WEIGHT_SENTENCE=1.0
PROXIMITY_WEIGHT_PARAGRAPH=0.6
PROXIMITY_WEIGHT_SECTION=0.3
PROXIMITY_WEIGHT_PAGE=0.1

# =============================================
# PMI WEIGHTING (Phase 2)
# =============================================
# Laplace smoothing factor (0-1)
PMI_SMOOTHING=0.5

# Minimum co-occurrences to calculate PMI
PMI_MIN_FREQUENCY=2

# Combine PMI with frequency? (true/false)
PMI_COMBINE_FREQUENCY=true

# Filter negative PMI edges? (true/false)
PMI_FILTER_NEGATIVE=true

# =============================================
# ENSEMBLE AGREEMENT (Phase 2)
# =============================================
# Fuzzy name match threshold (0-1)
ENSEMBLE_NAME_MATCH_THRESHOLD=0.85

# Confidence boost when both extractors agree
ENSEMBLE_BOOST_BOTH=1.2

# Confidence penalty for TextRazor-only entities
ENSEMBLE_PENALTY_TEXTRAZOR=0.9

# Confidence penalty for NuExtract-only entities
ENSEMBLE_PENALTY_NUEXTRACT=0.85

# =============================================
# SQLITE DATABASE (Addon)
# =============================================
# Path to SQLite database file
# Leave empty for in-memory database
SQLITE_DB_PATH=./data/seo-semantic.db
